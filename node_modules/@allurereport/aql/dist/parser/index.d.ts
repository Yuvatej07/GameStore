import type { AqlParseResult, AqlParserConfig } from "../model.js";
/**
 * Parser for AQL (Allure Query Language) expressions.
 * Converts AQL strings into abstract syntax trees (AST).
 */
export declare class AqlParser {
    private tokens;
    private position;
    private context;
    private config;
    /**
     * Creates a new AQL parser instance.
     *
     * @param input - The AQL string to parse
     * @param context - Optional context map for function values (e.g., `now()`, `currentUser()`)
     * @param config - Optional parser configuration to restrict available features
     * @throws {AqlParserError} If input is not a non-empty string
     */
    constructor(input: string, context?: Map<string, any> | undefined, config?: AqlParserConfig);
    /**
     * Parses the AQL string into an abstract syntax tree.
     *
     * @returns The parse result containing the expression or null if input is empty
     * @throws {AqlParserError} If the AQL string is invalid or uses forbidden features
     *
     * @example
     * ```typescript
     * const parser = new AqlParser('status = "passed"');
     * const result = parser.parse();
     * console.log(result.expression); // AqlConditionExpression
     * ```
     */
    parse(): AqlParseResult;
    private parseOrExpression;
    private parseAndExpression;
    private parseNotExpression;
    private parsePrimaryExpression;
    private parseAccessor;
    private parseOperation;
    private parseValue;
    private parseArray;
    private match;
    private check;
    private expect;
    private getErrorContext;
    private advance;
    private get reachedEOL();
    private get current();
    private get previous();
    private unquoteString;
    /**
     * Validates that the identifier format is correct (only Latin letters and underscores).
     *
     * @param identifier - The identifier to validate
     * @param position - The position in the input string where the identifier was found
     * @throws {AqlParserError} If the identifier format is invalid
     * @private
     */
    private validateIdentifierFormat;
    /**
     * Validates that the logical operator is allowed according to the configuration.
     *
     * @param operator - The logical operator to validate (AND, OR, NOT)
     * @param position - The position in the input string where the operator was found
     * @throws {AqlParserError} If the operator is not allowed
     * @private
     */
    private validateLogicalOperator;
    /**
     * Validates that the operation is allowed according to the configuration.
     *
     * @param operation - The operation to validate (GT, GE, LT, LE, EQ, NEQ, CONTAINS, IN)
     * @param position - The position in the input string where the operation was found
     * @throws {AqlParserError} If the operation is not allowed
     * @private
     */
    private validateOperation;
    /**
     * Validates that the identifier is allowed according to the configuration.
     *
     * @param identifier - The identifier to validate
     * @param position - The position in the input string where the identifier was found
     * @throws {AqlParserError} If the identifier is not allowed
     * @private
     */
    private validateIdentifier;
    /**
     * Validates that the value type is allowed according to the configuration.
     *
     * @param valueType - The value type to validate (NULL, BOOLEAN, NUMBER, STRING, FUNCTION)
     * @param position - The position in the input string where the value was found
     * @throws {AqlParserError} If the value type is not allowed
     * @private
     */
    private validateValueType;
}
/**
 * Convenience function for parsing AQL string.
 *
 * @param aql - The AQL string to parse
 * @param context - Optional context map or object for function values (e.g., `now()`, `currentUser()`)
 * @param config - Optional parser configuration to restrict available features
 * @returns The parse result containing the expression or null if input is empty
 * @throws {AqlParserError} If the AQL string is invalid or uses forbidden features
 *
 * @example
 * ```typescript
 * // Basic usage
 * const result = parseAql('status = "passed"');
 *
 * // With context
 * const result = parseAql('createdDate >= now()', { "now()": Date.now() });
 *
 * // With configuration
 * import { AqlOperation } from "./types";
 * const config = { operations: [AqlOperation.EQ, AqlOperation.NEQ], identifiers: ["status"] };
 * const result = parseAql('status = "passed"', undefined, config);
 * ```
 */
export declare function parseAql(aql: string, context?: Map<string, any> | Record<string, any>, config?: AqlParserConfig): AqlParseResult;
