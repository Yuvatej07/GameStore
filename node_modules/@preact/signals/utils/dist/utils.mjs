import{Signal as n}from"@preact/signals-core";import{useSignal}from"@preact/signals";import{createElement as t,Fragment as r}from"preact";import{useMemo as o}from"preact/hooks";const e=n=>"function"==typeof n.children?n.children(n.v,n.i):n.children;e.displayName="Item";function c(n){const r="function"==typeof n.when?n.when():n.when.value;if(!r)return n.fallback||null;else return t(e,{v:r,children:n.children})}c.displayName="Show";function i(c){const i=o(()=>new Map,[]),u="function"==typeof c.each?c.each():c.each,f=u instanceof n?u.value:u;if(!f.length)return c.fallback||null;const s=new Set(i.keys()),p=f.map((n,r)=>{s.delete(n);if(!i.has(n)){const o=t(e,{v:n,i:r,children:c.children});i.set(n,o);return o}return i.get(n)});s.forEach(n=>{i.delete(n)});return t(r,null,p)}i.displayName="For";function u(n){const t=useSignal(n);if(t.peek()!==n)t.value=n;return t}function f(n){const t=useSignal(n);if(!("current"in t))Object.defineProperty(t,"current",s);return t}const s={configurable:!0,get(){return this.value},set(n){this.value=n}};export{i as For,c as Show,u as useLiveSignal,f as useSignalRef};//# sourceMappingURL=utils.mjs.map
